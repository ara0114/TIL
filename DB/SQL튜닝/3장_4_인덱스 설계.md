## 인덱스 설계가 어려운 이유

- 인덱스가 많을 경우 생기는 문제
    - DML성능저하
    - 데이터베이스 사이즈 증가(디스크 공간 낭비)
    - 데이터베이스 관리 및 운영비용상승
- 인덱스 추가는 시스템 부하, 인덱스 변경은 운영 리스크 증가

## 가장 중요한 두가지 선택기준

- 스캔 효율성을 높이는 두가지 조건
    - 조건절에 항상 사용하거나 자주 사용하는 컬럼 선정
    - ‘=’ 조건으로 자주 조회하는 컬럼 앞쪽에 두기

## 스캔 효율성 이외의 판단기준

- 수행빈도
- 업무상 중요도
- 클러스터링 팩터
- 데이터량
- DML부하
- 저장공간
- 인덱스 관리비용 등

## 소트 연산을 생략하기 위한 컬럼 추가

- ‘=’ 조건절 컬럼은 ORDER BY 절에 없어도 인덱스 구성에 포함가능
- ‘=’이아닌 조건절 컬럼들은 반드시 ORDER BY 컬럼보다 뒤쪽에 두어야 소트연산 생략가능
- I/O 를 최소화하면서도 소트연산을 생략하는 인덱스 구성
    - ‘=’ 연산자로 사용한 조건절 컬럼 선정
    - ORDER BY절에 기술한 컬럼 추가
    - ‘=’ 연산자가 아닌 조건절 컬럼은 데이터 분포를 고려해 추가 여부 결정
- IN 조건절이 IN-List Iterator방식으로 풀리면 안됨(액세스 조건x, 필터조건으로 사용)

## 결합 인덱스 선택도

- 인덱스 생성여부 결정시 선택도가 충분히 낮은지가 중요한 판단기준
- 선택도: 전체 레코드 중 조건절에 의해 선택되는 레코드 비율
- 카디널리티: 선택도 x 총 레코드 수
- 인덱스 선택도: 인덱스 컬럼을 모두 ‘=’ 로 조회할때 평균적으로 선택되는 비율
- 생성여부 결정시 선택도 매우 중요. 컬럼간 순서를 결정할때는 선택도보다 필수 조건 여부, 연산자 형태가 더 중요한 판단 기준
