# 인덱스 구조 및 탐색

- 인덱스: 큰 테이블에서 소량데이터 검색시 사용. OLTP시스템에서 소량데이터 주로 검색하므로 인덱스 튜닝 무엇보다 중요함
- 인덱스 튜닝 핵심요소
    - 인덱스 스캔 효율화 튜닝: 인덱스 스캔과정에서 발생하는 비효율 줄이는 것.
    - 랜덤 액세스 최소화 튜닝: 테이블 액세스 횟수 줄이는 것.

## 인덱스 구조

- B*Tree구조: 루트 - 브랜치 - 리프
- 루트와 브랜치 블록에 있는 각 레코드는 하위 블록에 대한 주소값 가짐.
- 키 값은 하위 블록에 저장된 키값의 범위 나타냄.
- LMC: Leftmost Child. 자식 노드 중 가장 왼쪽 끝에 위치한 블록. 키값을 갖지않는 레코드. LMC가 가리키는 주소로 찾아간 블록엔 키값을 가진 첫번재 레코드보다 작거나 같은 레코드 저장
- 리프 블록에 저장된 각 레코드는 키값 순으로 정렬 + 테이블 레코드를 가리키는 주소값(ROWID)가짐. 인덱스 키값이 같다면 ROWID순으로 정렬.
- ROWID = 데이터 블록주소(DBA: DataBlock Address) + 로우번호
    - DBA = 데이터 파일번호 + 블록번호
    - 블록번호 = 데이터 파일 내에서 부여한 상대적 순번
    - 로우번호 = 블록 내 순번
- 리프블록간에는 양뱡향 연결리스트(Double Linked List) 구조 가짐

## 인덱스 탐색방법

### 수직적 탐색

- 인덱스 스캔 시작지점을 찾는 과정
- 정렬된 인덱스 레코드 중 조건에 만족하는 첫번째 레코드. 인덱스 스캔시작지점을 찾는 과정.
- 루트블록부터 시작

### 수평적 탐색

- 데이터를 찾는 과정
- 수직적탐색으로 스캔 시작점을 찾고 인덱스 리프 블록을 수평적으로 스캔.
- 인덱스 리프 블록끼리 서로 앞뒤 블록에 대한 주소값 가짐(double linked list구조)
- 수평탐색이유
    - 조건절에 만족하는 데이터 모두 찾기위해
    - ROWID얻기 위해(인덱스 스캔후 테이블 액세스 위함)
