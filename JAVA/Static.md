# 정적멤버와 static

## 정적멤버

클래스에 고정된 멤버, 객체를 생성하지 않고 사용할 수 있는 필드와 메소드.

객체에 소속된 멤버가 아니라 클래스에 소속된 멤버이므로 `클래스멤버` 라고도 함.



### 선언

`static` 키워드를 붙여 선언.

객체마다 가지고 있을 필요성이 없는 `공용적인 데이터` 라면 정적필드로 선언

인스턴스 필드를 이용하지 않는다면 정적메소드로 선언 

```java
public class 클래스명{
    //정적필드
    static 타입 필드명 = 초기값;
    
    //정적메소드
    static 리턴타입 메소드명(매개변수,...){...}
}
```



### 사용

메모리 영역에 적재할때 클래스별로 관리되며, 클래스 로딩이 끝나면 바로 사용할 수 있음.

클래스 이름과 함께 `도트(.)` 연산자로 접근

객체 참조변수로도 접근이 가능하지만 **`클래스이름으로 접근`** 하는 것이 좋음.

```java
public class Calculator{
    static double pi = 3.14159;
    static int plus(int x, int y){...}
}
//클래스 이름으로 접근
double result = 10*10*Calculator.pi;
int result2 = Calculator.plus(10,5);

//객체 참조변수로 접근
Calculator myCalc = new Calculator();
double result = 10*10*myCalc.pi;
int result2 = myCalc.plus(10,5);
```



### 정적 초기화 블록

정적필드는 필드 선언과 동시에 초기값을 주는 것이 보통이며, 객체 생성 없이도 사용해야하므로 **생성자에서 초기화 작업을 할 수 없음**

정적블록은 클래스가 메모리로 로딩될때 자동 실행.

클래스 내부에 여러개 선언되어도 상관 없으며, 선언된 순서대로 실행



### 정적 메소드와 블록 선언시 주의사항

- 객체가 없어도 실행되므로 내부에 인스턴스 필드나 인스턴스 메소드를 사용할 수 없음.
- 객체 자신의 참조인 this키워드도 사용불가
- 인스턴스 멤버를 사용하고 싶다면 객체를 먼저 생성하고 참조 변수로 접근해야함.
- `main() 메소드도 정적메소드` 이므로 객체 생성 없이 인스턴스필드 및 메소드를 바로 사용할 수 없음 



### 싱글톤(Singleton)

전체 프로그램에서 단 하나의 객체만 만들도록 보장하여 딱 하나만 생성되는 객체를 말함.

클래스 외부에서 new연산자로 생성자를 호출할 수 없도록 해야함 => 생성자 앞에 `private` 접근제한자 붙여줌

(클래스 내부에서는 new연산자로 생성자 호출 가능)

자신의 타입인 정적 필드를 하나 선언하고 자신의 객체를 생성해 초기화하고 정적필드도 `private` 접근제한자를 붙여 외부에서 필드값을 변경하지 못하도록함.

호출할 수 있는 정적메소드인 `getInstance()` 를 선언하고 정적 필드에서 참조하고 있는 자신의 객체를 리턴

=> 외부에서 객체를 얻는 유일한 방법은 `getInstance() 메소드 호출`이며, 단하나의 객체만을 리턴.

```java
/* 싱글톤을 만드는 코드 */
public class 클래스{
    //정적필드
    private static 클래스 singleton = new 클래스();
    //생성자
    private 클래스() {}
    //정적메소드
    static 클래스 getInstance(){
        return singleton;
    }
}

//getInstance()는 단 하나의 객체만 리턴하므로 변수1과 변수2는 동일한 객체를 참조함
클래스 변수1 = 클래스.getInstance();
클래스 변수2 = 클래스.getInstance();
```





